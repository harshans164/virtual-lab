<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiment Results</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            padding: 40px 0;
        }
        .results-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            padding: 30px;
            animation: slideUp 0.5s ease-out;
        }
        .formula {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .result-item {
            margin: 15px 0;
            padding: 10px;
            border-left: 4px solid #4a569d;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="results-card">
            <h1 class="text-center mb-4">Experiment Results</h1>
            
            <div class="result-item">
                <h5>Radius of Blue Ball (r):</h5>
                <p class="lead" id="blueRadius">2 mm</p>
            </div>

            <div class="result-item">
                <h5>Radius of Red Ball (R):</h5>
                <p class="lead" id="redRadius">4 mm</p>
            </div>

            <div class="result-item">
                <h5>Difference in Radii (R-r):</h5>
                <p class="lead" id="radiusDiff"></p>
            </div>

            <div class="result-item">
                <h5>Height (h) = Dist A - Dist B:</h5>
                <p class="lead" id="height">5 mm</p>
            </div>

            <div class="formula">
                <h5>Formula:</h5>
                <p>sin(α) = (R-r)/h</p>
                <div id="calculation"></div>
                <h5 class="mt-3">Result:</h5>
                <p class="lead" id="angle"></p>
            </div>

            <div class="text-center mt-4">
                <button class="btn btn-primary me-3" onclick="window.location.href='index.html'">Back to Experiment</button>
                <button class="btn btn-success" onclick="downloadReport()">Download Report</button>
            </div>
        </div>
    </div>

    <script>
        function downloadReport() {
            const r = 2;  // Blue ball radius
            const R = 4;  // Red ball radius
            const rDiff = R - r;
            const height = 5;  // Height (Dist A - Dist B)
            const sinAlpha = rDiff/height;
            const alpha = Math.asin(sinAlpha) * (180/Math.PI);

            // Create the report content
            const reportContent = 
`Virtual Metrology Lab - Experiment Report
========================================

Ball Measurements:
----------------
Radius of Blue Ball (r): ${r} mm
Radius of Red Ball (R): ${R} mm
Difference in Radii (R-r): ${rDiff} mm

Distance Measurements:
-------------------
Distance A: 15 mm
Distance B: 10 mm
Height (Dist A - Dist B): ${height} mm

Angle Calculation:
----------------
Formula: sin(α) = (R-r)/h
sin(α) = ${rDiff}/${height} = ${sinAlpha.toFixed(4)}
α = ${alpha.toFixed(2)}°

Generated on: ${new Date().toLocaleString()}
`;

            // Create a Blob containing the text
            const blob = new Blob([reportContent], { type: 'text/plain' });
            
            // Create a temporary link to download the file
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = 'metrology_lab_report.txt';
            
            // Trigger the download
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        document.addEventListener('DOMContentLoaded', function() {
            // Fixed values from the experiment
            const r = 2; // Blue ball radius in mm
            const R = 4; // Red ball radius in mm
            const rDiff = R - r; // Difference in radii
            const height = 5; // Height from Dist A - Dist B (15mm - 10mm = 5mm)
            const sinAlpha = rDiff/height;
            const alpha = Math.asin(sinAlpha) * (180/Math.PI); // Convert to degrees

            document.getElementById('radiusDiff').textContent = rDiff.toFixed(2) + ' mm';
            document.getElementById('height').textContent = height.toFixed(2) + ' mm';
            document.getElementById('calculation').innerHTML = `
                sin(α) = ${rDiff.toFixed(2)}/${height.toFixed(2)} = ${(rDiff/height).toFixed(4)}
            `;
            document.getElementById('angle').textContent = `α = ${alpha.toFixed(2)}°`;
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>